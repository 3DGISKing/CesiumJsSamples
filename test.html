<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Use correct character set. -->
        <meta charset="utf-8" />
        <!-- Tell IE to use the latest, best version. -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <!-- Make the application on mobile take up the full browser screen and disable user scaling. -->
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
        />
        <title>Draw a Triangle</title>
        <link
            href="https://cesium.com/downloads/cesiumjs/releases/1.128/Build/Cesium/Widgets/widgets.css"
            rel="stylesheet"
        />
        <script src="https://cesium.com/downloads/cesiumjs/releases/1.128/Build/CesiumUnminified/Cesium.js"></script>
        <style>
            #controls {
                position: absolute;
                top: 100px;
                right: 100px;
            }
        </style>
    </head>
    <body>
        <div id="cesiumContainer" class="fullSize"></div>
        <div id="controls"></div>

        <script type="module">
            const { Viewer, Cartesian3, Math } = window.Cesium;

            document.addEventListener("DOMContentLoaded", () => {
                // Create the viewer with the default render loop enabled
                const viewer = new Viewer("cesiumContainer", {
                    useDefaultRenderLoop: true
                });

                // Set an initial view that's clearly different from the target
                viewer.camera.setView({
                    destination: Cartesian3.fromDegrees(-90.0, 40.0, 15000000)
                });

                // Create a control button for testing flyTo
                const controlsDiv = document.getElementById("controls");
                if (!controlsDiv) return;
                controlsDiv.innerHTML = "";

                const moveToDebugBtn = document.createElement("button");
                moveToDebugBtn.textContent = "Fly To Debug Entity";
                controlsDiv.appendChild(moveToDebugBtn);

                // This is the code that doesn't work
                moveToDebugBtn.addEventListener("click", () => {
                    console.log("calling flyTo with orientation...");
                    viewer.camera.flyTo({
                        destination: Cartesian3.fromDegrees(-117.16, 32.71, 15000.0),
                        orientation: {
                            heading: Math.toRadians(0),
                            pitch: Math.toRadians(-45),
                            roll: 0
                        },
                        duration: 3
                    });
                });
            });
        </script>
    </body>
</html>
